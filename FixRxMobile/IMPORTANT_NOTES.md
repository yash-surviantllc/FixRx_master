# Important Configuration Notes

## Bundle Identifiers

**IMPORTANT**: The `app.json` file does NOT include bundle identifiers (`bundleIdentifier` for iOS and `package` for Android).

### Why?
- If you already have the app published with different identifiers, adding new ones would create a separate app
- Bundle identifiers should be configured based on your existing app setup

### Action Required:
If you need to add bundle identifiers for deep linking to work in production builds:

1. Check your existing app's bundle identifier:
   - **iOS**: Check in Apple Developer Console or Xcode
   - **Android**: Check in Google Play Console or `android/app/build.gradle`

2. Add them to `app.json`:
   ```json
   "ios": {
     "bundleIdentifier": "your.existing.bundle.id",
     ...
   },
   "android": {
     "package": "your.existing.package.name",
     ...
   }
   ```

## Deep Linking Configuration

The deep linking setup requires:

1. **Backend `.env`**:
   ```
   FRONTEND_URL=fixrx://
   APP_SCHEME=fixrx
   ```

2. **Mobile `.env`** (auto-generated by `npm run setup`):
   ```
   EXPO_PUBLIC_API_BASE_URL=http://YOUR_LOCAL_IP:3000/api/v1
   EXPO_PUBLIC_APP_SCHEME=fixrx
   EXPO_PUBLIC_APP_DOMAIN=fixrx.com
   ```

3. **Network**: Ensure mobile device and backend are on the same WiFi network for local development

## Known Issues Fixed

### Issue 1: Undefined `maxRequests` Variable
- **File**: `Backend/src/services/magicLinkService.js`
- **Status**: ✅ Fixed - Added `const maxRequests = 5;` on line 305
- **Impact**: Rate limiting now works correctly

### Issue 2: `.env` File Protection
- **Status**: ✅ Working as intended
- `.env` files are blocked by `.gitignore` (security best practice)
- Use `npm run setup` to automatically create `.env` with correct configuration
- `.env.example` is provided as a template

## Testing Checklist

Before deploying or testing:

- [ ] Backend `.env` has `FRONTEND_URL=fixrx://`
- [ ] Run `npm run setup` in mobile app directory
- [ ] Backend server is running
- [ ] Mobile device and backend are on same network
- [ ] Test magic link flow end-to-end
- [ ] Verify deep links open the app (not browser/localhost)

## Production Deployment

For production:

1. Update backend `.env`:
   ```
   FRONTEND_URL=https://fixrx.com
   NODE_ENV=production
   ```

2. Configure Universal Links (iOS) and App Links (Android):
   - Add bundle identifiers to `app.json`
   - Set up `.well-known/apple-app-site-association` (iOS)
   - Set up `.well-known/assetlinks.json` (Android)
   - Configure DNS and SSL for your domain

3. Test deep links with production URLs

## Support

For issues or questions, refer to:
- [DEEP_LINKING_SETUP.md](./DEEP_LINKING_SETUP.md) - Detailed setup guide
- [README.md](./README.md) - Quick start guide
